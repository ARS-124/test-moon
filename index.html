<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>K√†iStore</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Arial,sans-serif;background:#f4f6f8;padding-bottom:140px}

/* ================= HEADER ================= */
header{
  position:fixed;
  top:0;
  left:0;
  right:0;
  background:#304254;
  color:#fff;
  padding:10px 30px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  z-index:1000;
}

.logo{
  font-size:22px;
  font-weight:700;
  letter-spacing:.5px;
}

.header-nav{
  display:flex;
  gap:24px;
}

.header-nav span{
  cursor:pointer;
  font-size:14px;
  opacity:.85;
  transition:.3s;
  position:relative;
}

.header-nav span:hover{
  opacity:1;
}

.header-nav span.active{
  color:#ffd369;
  opacity:1;
}

.header-nav span::after{
  content:"";
  position:absolute;
  left:0;
  bottom:-4px;
  width:0%;
  height:2px;
  background:#ffd369;
  transition:.3s;
}

.header-nav span:hover::after,
.header-nav span.active::after{
  width:100%;
}

/* beri jarak karena header fixed */
.segment{
  max-width:900px;
  margin:110px auto 40px auto;
  padding:0 16px;
}

.segment h3{margin-bottom:14px}

.products{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}

.card{background:#fff;border-radius:14px;padding:14px;box-shadow:0 6px 14px rgba(0,0,0,.1);transition:.25s}
.card:hover{transform:translateY(-6px)}
.card img{width:100%;height:140px;background:#ddd;border-radius:10px}
.card h4{margin:10px 0 6px}
.desc{font-size:13px;color:#555;margin-bottom:6px}
.price{font-weight:bold;margin-bottom:8px}

.counter{display:flex;justify-content:center;align-items:center;gap:10px}
.counter button{
  width:34px;
  height:34px;
  border:none;
  border-radius:50%;
  background:#304254;
  color:#fff;
  font-size:20px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}
.counter span{min-width:20px;text-align:center}

.coming{opacity:.6;pointer-events:none}
.label{background:#c0392b;color:#fff;padding:6px;border-radius:8px;text-align:center;margin-top:6px;font-size:13px}

.cart-bar{position:fixed;bottom:0;left:0;right:0;background:#304254;color:#fff;padding:14px 16px;display:none;justify-content:space-between;cursor:pointer;animation:slideUp .3s}
@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}

.overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none}
.popup{position:fixed;bottom:0;left:0;right:0;background:#fff;border-radius:16px 16px 0 0;padding:20px;display:none;animation:slideUp .3s}
.popup ul{list-style:none;margin-bottom:10px}
.row{display:flex;justify-content:space-between;margin:6px 0}

.promo-box{margin-top:10px}
.promo-box input{width:100%;padding:10px;margin-top:6px}
.promo-status{font-size:13px;margin-top:6px}
.promo-error{color:#c0392b}
.promo-success{color:green}

button{width:100%;padding:12px;margin-top:8px;border:none;border-radius:10px;font-size:16px}
.buy{background:#304254;color:#fff}
.close{background:#eee}
</style>
</head>
<body>

<header>
<div class="logo">K√†iStore</div>
<div class="header-nav">
<span onclick="scrollToSection('appSection')" data-target="appSection">App Pro</span>
<span onclick="scrollToSection('foodSection')" data-target="foodSection">Makanan</span>
</div>
</header>

<section class="segment" id="appSection">
<h3>üì± App Pro</h3>
<div class="products" id="appProducts"></div>
</section>

<section class="segment" id="foodSection">
<h3>üçΩÔ∏è Makanan</h3>
<div class="products" id="foodProducts"></div>
</section>

<div class="cart-bar" id="cartBar" onclick="openCart()">
<span id="cartText">0 item</span>
<strong>Lihat Keranjang</strong>
</div>

<div class="overlay" id="overlay" onclick="closeCart()"></div>

<div class="popup" id="cartPopup">
<h3>Keranjang</h3>
<ul id="cartList"></ul>
<p id="subtotal"></p>
<p id="discount"></p>
<p><strong id="total"></strong></p>

<div class="promo-box" id="promoBox">
<label>Kode Promo</label>
<input id="promoInput" placeholder="Masukkan kode">
<button onclick="applyPromo()">Gunakan</button>
<p id="promoMsg" class="promo-status"></p>
</div>

<button class="close" onclick="closeCart()">Tutup</button>
<button class="buy" onclick="sendWA()">Pesan via WhatsApp</button>
</div>

<script>

const products = {
  app: [
    {id:'am', name:'AM Pro', desc:'Akses premium 1 tahun', price:10000},
    {id:'capcut', name:'CapCut Pro', desc:'Edit video tanpa watermark', price:15000},
    {id:'canva', name:'Canva Pro', desc:'Template & asset premium', price:10000},
    {id:'spotify', name:'Spotify Premium', desc:'Musik tanpa iklan', price:20000}
  ],
  food: [
    {id:'dimsum', name:'Dimsum', desc:'Dimsum fresh', coming:true},
    {id:'snackers', name:'Snackers', desc:'Camilan renyah', coming:true}
  ]
};

const cart = {};
const promos = {SAVE10:10,SAVE20:20};
let appliedPromo = null;

function rupiah(n){return "Rp "+n.toLocaleString("id-ID");}

function renderProducts(){
  const appContainer = document.getElementById('appProducts');
  const foodContainer = document.getElementById('foodProducts');

  products.app.forEach(p=>{
    const card = document.createElement('div');
    card.className='card';
    card.innerHTML=`
      <img>
      <h4>${p.name}</h4>
      <p class="desc">${p.desc}</p>
      <div class="price">${rupiah(p.price)}</div>
      <div class="counter">
        <button onclick="updateQty('${p.id}',-1)">‚àí</button>
        <span id="${p.id}">0</span>
        <button onclick="updateQty('${p.id}',1)">+</button>
      </div>
    `;
    appContainer.appendChild(card);
  });

  products.food.forEach(p=>{
    const card = document.createElement('div');
    card.className='card coming';
    card.innerHTML=`
      <img>
      <h4>${p.name}</h4>
      <p class="desc">${p.desc}</p>
      <div class="label">COMING SOON</div>
    `;
    foodContainer.appendChild(card);
  });
}

function updateQty(id,change){
  cart[id]=(cart[id]||0)+change;
  if(cart[id]<0)cart[id]=0;
  document.getElementById(id).innerText=cart[id];
  updateBar();
}

function updateBar(){
  const qty=Object.values(cart).reduce((a,b)=>a+b,0);
  cartBar.style.display=qty>0?"flex":"none";
  cartText.innerText=qty+" item";
}

function openCart(){overlay.style.display="block";cartPopup.style.display="block";renderCart();}
function closeCart(){overlay.style.display="none";cartPopup.style.display="none";}

function renderCart(){
  cartList.innerHTML="";
  let sub=0;

  products.app.forEach(p=>{
    if(cart[p.id]>0){
      const s=p.price*cart[p.id];
      sub+=s;
      const li=document.createElement("li");
      li.innerText=`${p.name} x ${cart[p.id]} ‚Äî ${rupiah(s)}`;
      cartList.appendChild(li);
    }
  });

  subtotal.innerText="Subtotal: "+rupiah(sub);
  let disc=appliedPromo?Math.floor(sub*appliedPromo/100):0;
  discount.innerText=appliedPromo?`Diskon (${appliedPromo}%): -${rupiah(disc)}`:"";
  total.innerText="Total: "+rupiah(sub-disc);
  promoBox.style.display=appliedPromo?"none":"block";
}

function applyPromo(){
  const code=promoInput.value.toUpperCase();
  if(!promos[code]){
    promoMsg.textContent="Kode tidak valid";
    promoMsg.className="promo-status promo-error";
    return;
  }
  appliedPromo=promos[code];
  promoMsg.textContent="Promo berhasil";
  promoMsg.className="promo-status promo-success";
  renderCart();
}

function sendWA(){
  let msg="Halo, saya ingin memesan:%0A%0A";
  let totalPrice=0;

  products.app.forEach(p=>{
    if(cart[p.id]>0){
      const s=p.price*cart[p.id];
      totalPrice+=s;
      msg+=`‚Ä¢ ${p.name} x ${cart[p.id]} = ${rupiah(s)}%0A`;
    }
  });

  msg+=`%0ATotal: ${rupiah(totalPrice)}`;
  window.location.href="https://wa.me/6281317761117?text="+msg;
}

function scrollToSection(id){
  document.getElementById(id).scrollIntoView({behavior:'smooth'});
}

/* ACTIVE NAV ON SCROLL */
const navItems=document.querySelectorAll('.header-nav span');
window.addEventListener('scroll',()=>{
  let current="";
  document.querySelectorAll('.segment').forEach(sec=>{
    const top=sec.offsetTop-140;
    if(scrollY>=top) current=sec.id;
  });

  navItems.forEach(item=>{
    item.classList.remove('active');
    if(item.dataset.target===current){
      item.classList.add('active');
    }
  });
});

renderProducts();

</script>
</body>
</html>

